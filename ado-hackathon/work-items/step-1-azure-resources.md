# Step 1: Setup Azure AI Resources ğŸ”§

Welcome to the Azure DevOps CI/CD Hackathon for AI Agent Deployment!

## ğŸ¯ Goal
Deploy a complete Azure AI infrastructure for multi-environment agent deployment in **one click**! No manual clicking through Azure Portal required.

## âš¡ One-Click Deployment

We've automated everything! Instead of creating 21 resources manually, you'll deploy them all with a single command using Terraform.

### What Gets Created Automatically

**For Each Environment (Dev, Test, Prod):**
- âœ… **Resource Group** - Container for all resources
- âœ… **Azure OpenAI** - With GPT-4o model deployed
- âœ… **Azure AI Hub** - Machine Learning workspace for agents
- âœ… **Application Insights** - Monitoring and telemetry
- âœ… **Key Vault** - Secrets management
- âœ… **Storage Account** - AI Hub storage
- âœ… **Log Analytics** - Centralized logging

**Total:** 21 resources across 3 environments! ğŸš€

### Unique Naming
Each deployment gets a unique 6-character suffix (e.g., `a1b2c3`) to prevent naming conflicts when multiple students deploy simultaneously.

**Example:** `aiagent-a1b2c3-dev-openai`

## ğŸ“‹ Prerequisites

Before deploying, ensure you have:

1. **Azure CLI** installed and authenticated
   ```bash
   az --version   # Should show version 2.50+
   az login       # Authenticate
   ```

2. **Terraform** installed
   ```bash
   terraform --version   # Should show version 1.0+
   ```

3. **Azure Subscription** with permission to create resources

## ğŸš€ Deploy Resources (Choose One Option)

### Option 1: One-Click Script (Recommended) â­

```bash
# Navigate to terraform directory
cd terraform

# Run the deployment script
./deploy.sh
```

The script will:
1. âœ… Check prerequisites
2. âœ… Authenticate to Azure
3. âœ… Auto-create `terraform.tfvars`
4. âœ… Deploy all 21 resources (~10-15 minutes)
5. âœ… Generate `azure-resources.md`
6. âœ… Display Azure DevOps setup instructions

### Option 2: Azure Developer CLI

```bash
# From repository root
azd auth login
azd up
```

Follow the prompts to select subscription and location.

### Option 3: Manual Terraform

```bash
cd terraform

# 1. Create configuration
cp terraform.tfvars.example terraform.tfvars
# Edit terraform.tfvars - add your subscription ID

# 2. Deploy
terraform init
terraform plan
terraform apply

# 3. View configuration
terraform output azure_devops_setup_instructions
```

## ğŸ“ During Deployment

The deployment will:
- Create unique resource names with random suffix
- Deploy GPT-4o model to all OpenAI instances
- Set up monitoring and logging
- Configure networking and permissions
- Take approximately 10-15 minutes

You'll see output like:
```
âœ… Deployment complete!
Unique Suffix: a1b2c3
Resource Prefix: aiagent-a1b2c3
```

## ğŸ“„ Document Your Deployment

After successful deployment, the `azure-resources.md` file will be auto-generated in your repository root with all connection details.

**Your file should contain:**
- Unique resource suffix
- Resource group names
- OpenAI endpoints
- AI Hub workspace IDs
- Instructions for Azure DevOps configuration

**Review the file and ensure it has all information!**

## âœ… Completion Criteria

To complete this step and unlock Step 2:

1. **Confirm `azure-resources.md` exists** in your repository root (auto-generated by deployment)
2. **Review the file** to ensure it contains all resource information
3. **Commit and push** to main branch:

```bash
# From repository root
git add azure-resources.md
git commit -m "Step 1: Azure AI resources deployed"
git push origin main
```

**Note:** The `azure-resources.md` file is automatically created by the Terraform deployment script with all necessary information!

## ğŸ“Š What You Deployed

After completion, you'll have:
- âœ… 3 Resource Groups (dev, test, prod)
- âœ… 3 Azure OpenAI instances with GPT-4o
- âœ… 3 Azure AI Hubs (Machine Learning Workspaces)
- âœ… 3 Application Insights for monitoring
- âœ… 3 Key Vaults for secrets
- âœ… 3 Storage Accounts
- âœ… 3 Log Analytics Workspaces

**Total:** 21 Azure resources ready for AI agent deployment!

## ğŸ“š Understanding What You Deployed

Take a moment to explore what Terraform created:

**View in Azure Portal:**
1. Go to [Azure Portal](https://portal.azure.com)
2. Search for your resource groups (e.g., `aiagent-a1b2c3-dev-rg`)
3. Explore the resources in each group

**View Terraform Outputs:**
```bash
cd terraform
terraform output                                  # All outputs
terraform output azure_devops_setup_instructions  # Next steps
```

## ğŸ†˜ Troubleshooting

**Problem: "Azure CLI not installed"**
```bash
# Install Azure CLI
# macOS: brew install azure-cli
# Windows: Download from https://aka.ms/installazurecliwindows
# Linux: curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash
```

**Problem: "Terraform not installed"**
```bash
# Install Terraform
# macOS: brew install terraform
# Windows: choco install terraform
# Linux: Download from https://www.terraform.io/downloads
```

**Problem: "Subscription not found"**
```bash
az account list --output table  # List subscriptions
az account set --subscription "YOUR-SUBSCRIPTION-ID"
```

**Problem: "Resource name conflicts"**
- This shouldn't happen due to unique suffix
- If it does, edit `terraform.tfvars` and change `resource_prefix`

**Problem: "OpenAI quota exceeded"**
- Try different region: Edit `location` in `terraform.tfvars`
- Or request quota increase in Azure Portal

## ğŸ’¡ Learning Points

**What you learned:**
- âœ… Infrastructure as Code (IaC) with Terraform
- âœ… Azure AI service architecture
- âœ… Multi-environment deployment strategy
- âœ… Resource naming conventions
- âœ… Azure OpenAI model deployment

**Why this matters:**
- Reproducible infrastructure
- Version-controlled configuration
- Consistent environments
- Easy cleanup and redeployment

## â­ï¸ What's Next?

After pushing your changes, the hackathon facilitator will automatically:
1. Detect your completion (`azure-resources.md` file exists)
2. Close this work item
3. Create **Step 2: Configure Azure DevOps**

In Step 2, you'll set up Azure DevOps service connections and variable groups using the information from your deployment!

---

**Need Help?** See [terraform/README.md](../terraform/README.md) for detailed deployment documentation.

ğŸš€ **Ready?** Run `./deploy.sh` and let's get started!
